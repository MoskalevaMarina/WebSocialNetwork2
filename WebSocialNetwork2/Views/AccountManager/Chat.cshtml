@model WebSocialNetwork2.ViewModels.ChatViewModel;

<meta http-equiv="refresh" content="5">

<script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.17.0/jquery.validate.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jquery.validation.unobtrusive/3.2.10/jquery.validate.unobtrusive.min.js"></script>

<div class="block-reg background-white">
    <div>
        <form method="get" asp-controller="AccountManager" asp-action="MyPage">
            <button class="btn  btn-lg btn-block" style="background-color: #DE95BA "> Назад</button>
        </form>
    </div>

    <h4 class="center">Чат @Model.You.FirstName и  @Model.ToWhom.FirstName</h4>

    <div class="lined-block">
        <label class="gray-text">Сообщения</label>

        @if (Model.History.Count != 0)
        {

            @foreach (var message in @Model.History)
            {
                <div>
                    <label style="font-weight:600"> @message.Sender.FirstName:</label> 
                    <label>  @message.Text </label>
                   
                </div>
            }
        }
        else
        {
            <div>
                <label> У вас пока нет сообщений с  @Model.ToWhom.GetFullName().</label>
            </div>
        }
    </div>

    <div class="lined-block">
        <label class="gray-text">Новое сообщение</label>

        <form class="frm" method="post" asp-controller="AccountManager" asp-action="NewMessage" asp-route-id="@Model.ToWhom.Id">
            <div asp-validation-summary="ModelOnly"></div>
            <div>
                <div class="mrgn">
                    <input asp-for="NewMessage.Text" class="form-control emojify" type="text" />
                </div>
                <div class="center">
                    <button class="btn  btn-lg btn-block" style="background-color: #4A266A; color:white; "> Отправить</button>
                  
                </div>
            </div>
        </form>
    </div>
</div>